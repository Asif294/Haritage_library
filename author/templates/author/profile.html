{% extends 'base.html' %}
{% load static %}

{% block head_title %}Heritage Library{% endblock %}

{% block content %}
<div class="bg-white px-3 py-4 rounded-xl my-6">
    <div class="flex items-center justify-between">
        <h4 class="font-bold text-3xl text-left pb-5">Library Account No: {{ request.user.account.account_no }}</h4>
        <a href="{% url "pass_change" %}" class="text-white font-bold text-3xl bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Change Your Password</a>
        <a href="{% url "update_profile" %}" class="text-white font-bold text-3xl bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">update profile</a>
    </div>

    <div class="container mt-4">
      <h2 class="text-2xl font-bold">Your Borrowed Books  ({{borrowed_books | length}})</h2>
      <ul class="mt-4">
        {% for borrowed_book in borrowed_books %}
        <li class="flex items-start p-2 gap-5 border rounded-xl border-gray-700 mb-4">
          <div class="flex-shrink-0">
            <img src="{{ borrowed_book.book.image.url }}" style="height: 150px; width: 100px;" alt="book_image" class="rounded-lg">
          </div>
          <div class="ml-4">
            <h4 class="font-bold">{{ borrowed_book.book.name }}</h4>
            <p class="text-gray-600">Price: ${{ borrowed_book.book.borro_price }}</p>
            <p class="text-gray-600">Borrowed on: {{ borrowed_book.borrow_date }}</p>
            {% if borrowed_book.return_date %}
            <p class="text-gray-600">Returned on: {{ borrowed_book.return_date }}</p>
            {% endif %}
            <div class="mt-4">
              {% if not borrowed_book.return_date %}
              <a href="{% url 'return_book' borrowed_book.book.id %}" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded m-1 inline-block">Return</a>
              {% else %}
              <button class="bg-gray-800 text-white py-2 px-4 rounded m-1 inline-block" disabled>Returned</button>
              <a class="bg-red-600 text-white py-2 px-4 rounded m-1 inline-block" href="{% url 'delete_borrowed_book' borrowed_book.id %}">Delete</a>
              {% endif %}
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    
    
{% endblock %}
